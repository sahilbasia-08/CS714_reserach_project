{"ast":null,"code":"var _jsxFileName = \"/home/rubbish/secure_messaging_platform/client/src/components/Messages/Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from \"react\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport Message from \"./Message/Message\";\nimport \"./Messages.css\";\n\n/**\n * Props:\n * - messages: Array<{ message_id?, ... }>\n * - current_user_name: string\n * - editMessage: fn\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Messages = /*#__PURE__*/_s( /*#__PURE__*/React.memo(_c = _s(function Messages({\n  messages = [],\n  current_user_name,\n  editMessage\n}) {\n  _s();\n  const items = useMemo(() => {\n    if (!Array.isArray(messages)) return [];\n    return messages.map((m, idx) => {\n      var _ref, _ref2, _m$message_id, _m$message_sender, _m$message_text;\n      // Prefer deterministic key from backend. Fallback to a composite.\n      const key = (_ref = m && ((_ref2 = (_m$message_id = m.message_id) !== null && _m$message_id !== void 0 ? _m$message_id : m.id) !== null && _ref2 !== void 0 ? _ref2 : m._id)) !== null && _ref !== void 0 ? _ref : `${idx}-${(_m$message_sender = m === null || m === void 0 ? void 0 : m.message_sender) !== null && _m$message_sender !== void 0 ? _m$message_sender : \"anon\"}-${((_m$message_text = m === null || m === void 0 ? void 0 : m.message_text) !== null && _m$message_text !== void 0 ? _m$message_text : \"\").slice(0, 16)}`;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Message, {\n          message: m,\n          current_user_name: current_user_name,\n          editMessage: editMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this);\n    });\n  }, [messages, current_user_name, editMessage]);\n  return /*#__PURE__*/_jsxDEV(ScrollToBottom, {\n    className: \"messages\",\n    children: items.length > 0 ? items : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"emptyState\",\n      \"aria-live\": \"polite\",\n      children: \"No messages yet \\u2014 say hi!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}, \"JuH2Tip3cwnoihIGVm6QoIvsF5k=\")), \"JuH2Tip3cwnoihIGVm6QoIvsF5k=\");\n_c2 = Messages;\nexport default Messages;\nvar _c, _c2;\n$RefreshReg$(_c, \"Messages$React.memo\");\n$RefreshReg$(_c2, \"Messages\");","map":{"version":3,"names":["React","useMemo","ScrollToBottom","Message","jsxDEV","_jsxDEV","Messages","_s","memo","_c","messages","current_user_name","editMessage","items","Array","isArray","map","m","idx","_ref","_ref2","_m$message_id","_m$message_sender","_m$message_text","key","message_id","id","_id","message_sender","message_text","slice","children","message","fileName","_jsxFileName","lineNumber","columnNumber","className","length","_c2","$RefreshReg$"],"sources":["/home/rubbish/secure_messaging_platform/client/src/components/Messages/Messages.js"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport Message from \"./Message/Message\";\nimport \"./Messages.css\";\n\n/**\n * Props:\n * - messages: Array<{ message_id?, ... }>\n * - current_user_name: string\n * - editMessage: fn\n */\nconst Messages = React.memo(function Messages({\n  messages = [],\n  current_user_name,\n  editMessage,\n}) {\n  const items = useMemo(() => {\n    if (!Array.isArray(messages)) return [];\n\n    return messages.map((m, idx) => {\n      // Prefer deterministic key from backend. Fallback to a composite.\n      const key =\n        (m && (m.message_id ?? m.id ?? m._id)) ??\n        `${idx}-${(m?.message_sender ?? \"anon\")}-${(m?.message_text ?? \"\").slice(0, 16)}`;\n\n      return (\n        <div key={key}>\n          <Message\n            message={m}\n            current_user_name={current_user_name}\n            editMessage={editMessage}\n          />\n        </div>\n      );\n    });\n  }, [messages, current_user_name, editMessage]);\n\n  return (\n    <ScrollToBottom className=\"messages\">\n      {items.length > 0 ? (\n        items\n      ) : (\n        <div className=\"emptyState\" aria-live=\"polite\">\n          No messages yet â€” say hi!\n        </div>\n      )}\n    </ScrollToBottom>\n  );\n});\n\nexport default Messages;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,OAAO,QAAQ,OAAO;AACtC,OAAOC,cAAc,MAAM,wBAAwB;AACnD,OAAOC,OAAO,MAAM,mBAAmB;AACvC,OAAO,gBAAgB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AALA,SAAAC,MAAA,IAAAC,OAAA;AAMA,MAAMC,QAAQ,gBAAAC,EAAA,eAAGP,KAAK,CAACQ,IAAI,CAAAC,EAAA,GAAAF,EAAA,CAAC,SAASD,QAAQA,CAAC;EAC5CI,QAAQ,GAAG,EAAE;EACbC,iBAAiB;EACjBC;AACF,CAAC,EAAE;EAAAL,EAAA;EACD,MAAMM,KAAK,GAAGZ,OAAO,CAAC,MAAM;IAC1B,IAAI,CAACa,KAAK,CAACC,OAAO,CAACL,QAAQ,CAAC,EAAE,OAAO,EAAE;IAEvC,OAAOA,QAAQ,CAACM,GAAG,CAAC,CAACC,CAAC,EAAEC,GAAG,KAAK;MAAA,IAAAC,IAAA,EAAAC,KAAA,EAAAC,aAAA,EAAAC,iBAAA,EAAAC,eAAA;MAC9B;MACA,MAAMC,GAAG,IAAAL,IAAA,GACNF,CAAC,MAAAG,KAAA,IAAAC,aAAA,GAAKJ,CAAC,CAACQ,UAAU,cAAAJ,aAAA,cAAAA,aAAA,GAAIJ,CAAC,CAACS,EAAE,cAAAN,KAAA,cAAAA,KAAA,GAAIH,CAAC,CAACU,GAAG,CAAC,cAAAR,IAAA,cAAAA,IAAA,GACpC,GAAED,GAAI,IAAC,CAAAI,iBAAA,GAAGL,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEW,cAAc,cAAAN,iBAAA,cAAAA,iBAAA,GAAI,MAAQ,IAAG,EAAAC,eAAA,GAACN,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEY,YAAY,cAAAN,eAAA,cAAAA,eAAA,GAAI,EAAE,EAAEO,KAAK,CAAC,CAAC,EAAE,EAAE,CAAE,EAAC;MAEnF,oBACEzB,OAAA;QAAA0B,QAAA,eACE1B,OAAA,CAACF,OAAO;UACN6B,OAAO,EAAEf,CAAE;UACXN,iBAAiB,EAAEA,iBAAkB;UACrCC,WAAW,EAAEA;QAAY;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B;MAAC,GALMZ,GAAG;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMR,CAAC;IAEV,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC1B,QAAQ,EAAEC,iBAAiB,EAAEC,WAAW,CAAC,CAAC;EAE9C,oBACEP,OAAA,CAACH,cAAc;IAACmC,SAAS,EAAC,UAAU;IAAAN,QAAA,EACjClB,KAAK,CAACyB,MAAM,GAAG,CAAC,GACfzB,KAAK,gBAELR,OAAA;MAAKgC,SAAS,EAAC,YAAY;MAAC,aAAU,QAAQ;MAAAN,QAAA,EAAC;IAE/C;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK;EACN;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACa,CAAC;AAErB,CAAC,kCAAC;AAACG,GAAA,GArCGjC,QAAQ;AAuCd,eAAeA,QAAQ;AAAC,IAAAG,EAAA,EAAA8B,GAAA;AAAAC,YAAA,CAAA/B,EAAA;AAAA+B,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}